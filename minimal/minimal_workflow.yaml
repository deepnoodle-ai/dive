name: 'Minimal Competitor Analysis'
description: 'A simple workflow to find and analyze a competitor'

config:
  logging:
    level: 'info'
  default_provider: 'anthropic'
  default_model: 'claude-3-7-sonnet-20250219'
  cache_control: 'ephemeral'

variables:
  - name: 'company_name'
    type: 'string'
    description: 'Name of the company to analyze'
    default: 'Example Corp'

tools:
  - name: 'google_search'
    enabled: true
  - name: 'firecrawl_scrape'
    enabled: true

agents:
  - name: 'researcher'
    description: 'Agent responsible for gathering information'
    instructions: 'Gather comprehensive information about the target company'
    tools: ['google_search', 'firecrawl_scrape']

tasks:
  - name: 'find_competitors'
    description: 'Find list of competitors for a company'
    operation: 'google_search'
    agent: 'researcher'
    inputs:
      company_name:
        type: 'string'
        description: 'Name of the company'
        required: true
    outputs:
      competitors:
        type: 'array'
        description: 'List of competitor companies'
    timeout: '30m'

  - name: 'analyze_competitor'
    description: 'Analyze a single competitor'
    operation: 'firecrawl_scrape'
    agent: 'researcher'
    inputs:
      competitor_name:
        type: 'string'
        description: 'Name of competitor to analyze'
        required: true
    outputs:
      analysis:
        type: 'object'
        description: 'Detailed competitor analysis'
    timeout: '30m'

workflows:
  - name: 'minimal_analysis'
    description: 'Simple workflow with two sequential steps'
    steps:
      - name: 'find_competitors'
        task: 'find_competitors'
        inputs:
          company_name: '${var.company_name}'
        next:
          - node: 'analyze_first_competitor'

      - name: 'analyze_first_competitor'
        task: 'analyze_competitor'
        inputs:
          competitor_name: '${find_competitors.output.competitors[0]}'
