Name: 'Code Overview'
Description: 'Generate a code overview for a given codebase'

Config:
  LLM:
    DefaultProvider: anthropic
    DefaultModel: claude-3-7-sonnet-20250219
  Logging:
    Level: warn

Tools:
  - Name: Web.Search
    Enabled: true
  - Name: Web.Fetch
    Enabled: true
  - Name: Directory.List
    Enabled: true
  - Name: File.Read
    Enabled: true

Agents:
  - Name: Engineer
    Goal: Analyze codebases and generate project overviews
    Tools:
      - Web.Search
      - Web.Fetch
      - Directory.List
      - File.Read
    ModelSettings:
      MaxTokens: 16384
      ReasoningEffort: medium

Workflows:
  - Name: Code Overview
    Description: 'Generate a code overview for a given codebase'
    Inputs:
      - Name: directory
        Type: string
        Description: 'The directory to generate a code overview for'
        Default: '.'
    Steps:
      - Name: List Files
        Agent: Engineer
        Prompt: |
          List all files in the directory: "${inputs.directory}"
        Store: file_list

      - Name: Read Key Files
        Agent: Engineer
        Prompt: |
          Here are the files we discovered:
          ${file_list}

          Read what look like the most important 2 files and summarize them.
        Store: key_files

      - Name: Generate Code Overview
        Agent: Engineer
        Prompt: |
          Generate a code overview for the codebase.

          The files are:
          ${file_list}

          Information about key files:

          ${key_files}

          Keep it short and concise.
        Store: code_overview

      - Name: Write Document
        Action: Document.Write
        Parameters:
          Path: output/code_overview.md
          Content: ${code_overview}
